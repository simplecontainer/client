kind: definition
definition:
  mysql:
    meta:
      name: mysql
      group: mysql
    spec:
      options:
        enabled: false
      container:
        image: "mysql"
        tag: "8.0"
        replicas: 1
        envs:
          - "MYSQL_ROOT_PASSWORD={{ configuration.password }}"
        networks:
          - "ghost"
        ports:
          - container: "3306"
        configuration:
          username: "root"
          password: "{{ configuration.mysql[*].password }}"
  nginx:
    meta:
      name: nginx
      group: nginx
    spec:
      options:
        enabled: false
      container:
        image: "nginx"
        tag: "1.23.3"
        replicas: 1
        networks:
          - "ghost"
        dependencies:
          - name: "mysql[*]"
            timeout: "100s"
        ports:
          - container: "80"
            host: "80"
          - container: "443"
            host: "443"
        resources:
          - identifier: "*"
            key: nginx-configuration
            mountPoint: /etc/nginx/conf.d/default.conf
        configuration:
          username: "root"